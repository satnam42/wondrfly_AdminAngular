<mat-card class="p-0">
    <mat-card-title class="">
        <div class="card-title-text">Program Form</div>
        <mat-divider></mat-divider>
    </mat-card-title>

    <mat-card-content *ngIf="isResponse">

        <div style="background-color: rgb(215, 224, 224);border-radius: 5px;" fxFlex="100" fxFlex.gt-xs="40"
            class="pr-1">
            <h6 *ngIf="responseData.data.firstName">&nbsp;&nbsp;Provider
                Name:&nbsp;&nbsp;{{responseData.data.firstName}}</h6>
            <h6 *ngIf="responseData.data.email">&nbsp;&nbsp;Provider Email:&nbsp;&nbsp;{{responseData.data.email}}</h6>
            <h6 *ngIf="responseData.data.id">&nbsp;&nbsp;Provider Id:&nbsp;&nbsp;{{responseData.data.id}}</h6>

        </div>


    </mat-card-content>

    <mat-card-content>
        <form [formGroup]="programForm">
            <div fxLayout="row wrap">
                <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <mat-label> Program Type</mat-label>
                            <mat-select formControlName="type" [(ngModel)]="program.type" required>
                                <mat-option selected value="Drops-in">Drops-in</mat-option>
                                <mat-option value="Camps">Camps</mat-option>
                                <mat-option value="Semesters">Semesters</mat-option>
                                <!-- <mat-option value="Ondemand">Ondemand</mat-option> -->
                                <mat-option value="Other">Other</mat-option>


                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <mat-label> Category Type</mat-label>
                            <mat-select formControlName="category" [(ngModel)]="program.categoryId" #itemValue (selectionChange)="changeItem($event.value)" multiple >

                                <mat-option *ngFor="let category of categories "
                                selected [value]="category.id">
                                {{category.name}}
                            </mat-option>
                                <!-- <option *ngFor="let category of categories " -->
                                <!-- value="{{category.id}}" selected> -->
                                <!-- {{category.name}} -->
                            <!-- </option> -->
                        
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="pb-1">
                        <mat-label style="color: rgb(118, 118, 118);">Sub-Category</mat-label>
                          <ng-autocomplete [data]="tags.tags" [searchKeyword]="keyword" (selected)='selectEvent($event)'
                            (inputChanged)='onChangeSearch($event)' (inputFocused)='onFocused($event)' [itemTemplate]="itemTemplate"
                            [notFoundTemplate]="notFoundTemplate">
                          </ng-autocomplete>
              
                          <ng-template #itemTemplate let-item>
                            <a [innerHTML]="item.name"></a>
                          </ng-template>
              
                          <ng-template #notFoundTemplate let-notFound>
                            <div *ngIf="tags.length" [innerHTML]="notFound"></div>
                          </ng-template>
                     </div>

                     <div class="pb-1">
                     <mat-form-field class="full-width">
                        <mat-chip-list>
                          <mat-chip *ngFor="let t of tag" [selectable]="selectable"
                              [removable]="removable" (removed)="remove(t)">
                              {{t.name}}<span *ngIf="!t?.name">{{t}}</span>
                              <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                          </mat-chip>
                      </mat-chip-list>
                      </mat-form-field>
                    </div>


                     <div class="pb-1">
                        <mat-form-field class="full-width">
                            <input matInput formControlName="emails" placeholder="Email"
                                [(ngModel)]="program.emails" required>
                        </mat-form-field>
                    </div>

                    <div class="pb-1">
                        <mat-label style="font-size: 0.875rem !important;color: rgb(118, 118, 118);">IS TIME NOT AVILABLE ?
                        </mat-label>
                        &nbsp;&nbsp;<mat-slide-toggle formControlName="isTimeNotMention"
                          [(ngModel)]="program.isTimeNotMention"><span class="text-invisible"></span></mat-slide-toggle>
            
                      </div>

                    <div *ngIf="!program.isTimeNotMention">
                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <input matInput name="stime" type='number' formControlName="startTime" [(ngModel)]="startTime"
                                 placeholder="Start Time" > 
                        </mat-form-field>
                    </div>

                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <input matInput name="etime" type='number'  formControlName="endTime" [(ngModel)]="endTime"
                               placeholder="End Time" >
                        </mat-form-field>
                    </div>
</div>

<div class="pb-1">
    <mat-form-field class="full-width">
        <mat-label>Days</mat-label>
        <mat-select name="dayss" formControlName="dayss" [(ngModel)]="daysValue"
           multiple>
            <mat-option [value]="'sunday'">Sunday</mat-option>
            <mat-option [value]="'monday'">Monday</mat-option>
            <mat-option [value]="'tuesday'">Tuesday</mat-option>
            <mat-option [value]="'wednesday'">Wednesday</mat-option>
            <mat-option [value]="'thursday'">Thursday</mat-option>
            <mat-option [value]="'friday'">Friday</mat-option>
            <mat-option [value]="'saturday'">Saturday</mat-option>
        </mat-select>
    </mat-form-field>
</div>

                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <input matInput name="presenter" formControlName="presenter" placeholder="Presenter"
                                [(ngModel)]="program.presenter">
                        </mat-form-field>
                    </div>

                    <div class="pb-1">
                        <mat-label style="font-size: 0.875rem !important;color:rgb(118, 118, 118);">IS IT A FREE PROGRAM
                            ?</mat-label>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <mat-slide-toggle formControlName="isFree"
                            [(ngModel)]="program.isFree"><span class="text-invisible"></span>
                        </mat-slide-toggle>
                    </div>


                    <div *ngIf="!program.isFree" class="pb-1">
                        <mat-form-field class="full-width">
                            <mat-label>PRICE</mat-label>
                            <input matInput formControlName="pricePerParticipant" type='number' name="price" placeholder="Type"
                                [(ngModel)]="program.pricePerParticipant">
                            <span matPrefix>$&nbsp;</span>
                        </mat-form-field>
                    </div>

                    <div *ngIf="!program.isFree" class="pb-1">
                        <mat-form-field class="full-width">
                        <mat-label>PRICE PER</mat-label>
              <mat-select formControlName="perTimePeriod" #itemValue (selectionChange)="getQuantity($event.value)"
               [(ngModel)]="perTimePeriod" >
                <mat-option value="Person">Person</mat-option>
                <mat-option value="Hour"> Hour</mat-option>
                <mat-option value="Day" >Day</mat-option>
                <mat-option value="Week">Week</mat-option>
                <mat-option value="Month" >Month</mat-option>
                <mat-option value="Anual">Anual</mat-option>
                <mat-option value="Seat">Seat</mat-option>
                <mat-option value="Class">Class</mat-option>
                <mat-option value="Session">Session</mat-option>
                <mat-option value="Semester">Semester</mat-option>
                <mat-option value="Lesson">Lesson</mat-option>
                <mat-option value="Package" >Package</mat-option>
  
              </mat-select>
            </mat-form-field><br>
                    </div>

                    <div *ngIf="!program.isFree " class="pb-1">
                        <mat-form-field class="width">
                            <mat-label>{{title}}</mat-label>
                            <mat-select formControlName='timePeriodDuration'  [(ngModel)]="timePeriodDuration">
                              <mat-option *ngFor='let item of numbers'  [value]="item" >{{item}}</mat-option>
                            </mat-select>
                          </mat-form-field>
                    </div>

                    <div *ngIf="!program.isFree" class="pb-1">
                        <mat-form-field class="full-width">
                            <mat-label>PRICE FOR SIBLINGS</mat-label>
                            <input matInput formControlName="priceForSiblings" type='number' name="pricee" placeholder="Type"
                                [(ngModel)]="program.priceForSiblings">
                            <span matPrefix>$&nbsp;</span>
                        </mat-form-field>
                    </div>
                    <div class="pb-1">
                        <label style="color:rgb(118, 118, 118);">Capacity</label>
                        <br>
                        <br>
                        <ng5-slider [(value)]="minCapacity" [(highValue)]="maxCapacity" [options]="capacityOption">
                        </ng5-slider>
                    </div>



                </div>

                <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">

                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <input matInput name="Program_name" formControlName="name" placeholder="Program Name"
                                [(ngModel)]="program.name" required>
                        </mat-form-field>
                    </div>

                    <!-- <div class="pb-1">
                        <mat-form-field class="full-width">
                            <input matInput name="alias" formControlName="alias" placeholder="Alias"
                                [(ngModel)]="program.alias" required>
                        </mat-form-field>
                    </div> -->


                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <mat-label>INDOOR OR OUTDOOR</mat-label>
                            <mat-select formControlName="indoorOroutdoor" [(ngModel)]="program.indoorOroutdoor">
                
                              <mat-option selected value="Indoor">Indoor</mat-option>
                              <mat-option value="Outdoor">Outdoor</mat-option>
                              <mat-option value="Both">Both</mat-option>

                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <mat-label>INPERSON OR VIRTUAL</mat-label>
                            <mat-select formControlName="inpersonOrVirtual" [(ngModel)]="program.inpersonOrVirtual">
                
                              <mat-option selected value="Inperson">Inperson</mat-option>
                              <mat-option value="Virtual">Virtual</mat-option>

                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <input matInput name="Address" formControlName="address" placeholder="Address"
                            [(ngModel)]="program.addresses" required>
                        </mat-form-field>
                    </div>
                    <div class="pb-1">
                        <mat-form-field class="full-width" (click)="openMap()">
                            <input matInput name="location" formControlName="location" placeholder="LOCATION"
                                [(ngModel)]="this.program.location" readonly>
                        </mat-form-field>
                    </div>
                    <div class="pb-1">
                        <mat-label style="font-size: 0.875rem !important;color: rgb(118, 118, 118);">IS DATE NOT AVILABLE ?
                        </mat-label>
                        &nbsp;&nbsp;<mat-slide-toggle formControlName="isDateNotMention"
                          [(ngModel)]="program.isDateNotMention"><span class="text-invisible"></span></mat-slide-toggle>
            
                      </div>
                      <br/>
                      <div *ngIf="!program.isDateNotMention">
                     

                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <input matInput name="sdate" formControlName="startDate" [owlDateTimeTrigger]="dt1"
                                placeholder="Start Date" [(ngModel)]="startDate" [owlDateTime]="dt1" readonly>
                            <owl-date-time [pickerType]="'calendar'" #dt1></owl-date-time>

                        </mat-form-field>
                    </div>

                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <input matInput name="edate" formControlName="endDate" [(ngModel)]="endDate"
                                [owlDateTimeTrigger]="dt2" placeholder="End Date" [owlDateTime]="dt2" readonly>
                            <owl-date-time [pickerType]="'calendar'" #dt2></owl-date-time>

                        </mat-form-field>
                    </div>
                    </div>

                   
                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <input matInput name="extdate" formControlName="extractionDate" [(ngModel)]="extractionDate"
                                [owlDateTimeTrigger]="extDate" placeholder="Extraction Date" [owlDateTime]="extDate" readonly>
                            <owl-date-time [pickerType]="'calendar'" #extDate></owl-date-time>

                        </mat-form-field>
                    </div>

                    <div class="pb-1">
                        <mat-form-field class="hours">
                            <!-- <input matInput name="duration" type="time" min="00:00" max="12:00" formControlName="duration" [(ngModel)]="duration"
                                 placeholder="duration" required> -->

                                 <input matInput name="duration" type="number" min="0" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                                 maxlength = "2" formControlName="duration" [(ngModel)]="durationTime.hours"
                                      placeholder="Hours" required >
                        </mat-form-field>
                        <span class="dot">:</span>
                       
                            <mat-form-field class="minutes">
                                <!-- <input matInput name="duration" type="time" min="00:00" max="12:00" formControlName="duration" [(ngModel)]="duration"
                                     placeholder="duration" required> -->
    
                                     <input matInput name="duration" type="number"min="0" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                                     maxlength = "2" formControlName="duration" [(ngModel)]="durationTime.minutes"
                                          placeholder="Minutes" required >
                            </mat-form-field>
                        
                    </div>



                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <input matInput name="joininglink" formControlName="joiningLink" placeholder="Joining Link"
                                [(ngModel)]="program.joiningLink">
                        </mat-form-field>
                    </div>
                    <div class="pb-1">
                        <mat-form-field class="full-width">
                            <mat-label>DESCRIPTION</mat-label>
                            <textarea matInput #Description maxlength="3000" placeholder="Type"
                                formControlName="description" [(ngModel)]="program.description"></textarea>
                            <mat-hint align="end">{{Description.value?.length  || 0}} / 3000</mat-hint>

                        </mat-form-field>
                    </div>
                


                    <div class="pb-1">
                        <label style="color:rgb(118, 118, 118);">Age Group</label>
                        <br>
                        <br>
                        <ng5-slider [(value)]="minAge" [(highValue)]="maxAge" [options]="ageOption">
                        </ng5-slider>
                    </div>
                </div>
            </div>
            <button mat-raised-button color="warn" (click)="back()">Back</button>
            <!-- <button *ngIf="program.type !=='unScheduled'"
                style="align-items:flex-end;margin-left: 15px;margin-right: 15px;" mat-raised-button color="accent"
                (click)="openPopUp()">Add
                Session</button> -->
            <button style="align-items:flex-end;margin-left: 15px;" mat-raised-button color="primary"
                [disabled]="programForm.invalid" (click)="onSubmit()">Submit</button>
        </form>
    </mat-card-content>
</mat-card>
<div class="container">
  <br>
  <div class="row">
    <div class="col-12">
      <div class="search-section">
        <input type="text" class="search_input" (keyup)="updateFilter($event.target.value)" placeholder="Search By Provider's Name" [(ngModel)]="searchText" />
        <i class="fa fa-filter filter-icon" aria-hidden="true" *ngIf="searchText"></i>
        <i aria-hidden="true" *ngIf="!searchText"></i>
        <span class="back-search">
          <mat-icon>search</mat-icon>
        </span>
      </div>
      <div class="row">
        <div class="col-4 total_providers">
          <h4 class="col-greys">Total Providers: <span> ({{temp.total}})</span> </h4>

        </div>
        <div class="col-8 text-right add_buttons">
          <label class="letsplay_btn ">Import
            <input  style="display: none;"  accept=".xlsx, .xls, .csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" mat-raised-button type="file" color="primary" #csv_file (change)=" onFileChange($event)" name="myfile">
          </label>
          <button class="letsplay_btn " data-toggle="modal" data-target="#addNewTopic" (click)="add()">+ ADD
            PROVIDER</button>
          <button class="letsplay_btn quick_add" data-toggle="modal" data-target="#addNewTopic"
            (click)="addQuick()">+ADD
            QUICK
            PROVIDER</button>
        </div>
      </div>

    </div>
  </div>

  <div class="search-results" infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolled)="onScroll()"  
  [scrollWindow]="false" >
    <table class="table forum-table ">
      <tbody>
        <tr>
          <th>
            Profile
          </th>
          <th>
            First Name
          </th>
          <th>
            Email
          </th>

          <th>
            Ambassador
          </th>
          <th>
            Information
          </th>
          <th>
            Free Trial
          </th>
        </tr>
        <tr *ngFor="let row of rows | filter : searchText;let i = index">
          <td>
            <label class="cursor"> <input style="display: none;" #file accept="image/*"
                (change)="providerImageSelect($event,row)" type="file" name="image" />
              <img class="userImage" *ngIf="row.avatarImages" src="{{row.avatarImages}}">
              <img class="userImage" *ngIf="!row.avatarImages" src="assets/images/user.png">
            </label>

          </td>
          <td>
            <span (click)="openPopUp(row)"> {{row.firstName}}</span>
          </td>
          <td>
            <span (click)="openPopUp(row)"> {{row.email}}</span>
          </td>
          <td>
            <mat-slide-toggle [checked]="row.isAmbassador" color="primary" (change)="addRemoveAmbassador($event,row)">
            </mat-slide-toggle>
          </td>

          <!-- Information -->

          <td>

            <img *ngIf="row.source==='Combined'" class="source_img" matTooltip="combined"
              src="assets/images/combined.png">
            <img *ngIf="row.source==='Linkedin'" class="source_img" matTooltip="linkedin"
              src="assets/images/linkedin.png">
            <img *ngIf="row.source==='Facebook'" class="source_img" matTooltip="facebook"
              src="assets/images/facebook.png">
            <img *ngIf="row.source==='Instagram'" class="source_img" matTooltip="instagram"
              src="assets/images/instagram.jpeg">
            <img *ngIf="row.source==='Google'" class="source_img" matTooltip="google" src="assets/images/google.png">
            <img *ngIf="row.source==='Library'" class="source_img" matTooltip="library" src="assets/images/library.png">
            <img *ngIf="row.source==='Recreation'" class="source_img" matTooltip="Recreation"
              src="assets/images/recreation.png">
            <img *ngIf="row.source==='Craiglist'" class="source_img" matTooltip="craiglist"
              src="assets/images/craiglist.png">&nbsp;
            <img *ngIf="row.source==='Indeed'" class="source_img" matTooltip="indeed" src="assets/images/indeed.png">
            <mat-icon *ngIf="!row.source" matTooltip="no source found" color="warn">not_interested</mat-icon>&nbsp;
            &nbsp;
            <mat-icon class="cursor" (click)="openPopUp(row)" color="primary" matTooltip="view">visibility
            </mat-icon>&nbsp;
            <mat-icon class="cursor" *ngIf="row.isActivated===true" matTooltip="status" [ngStyle]="{'color':'green'}"
              (click)="providerActiveInActive(row)">circle
            </mat-icon>
            <mat-icon class="cursor" *ngIf="row.isActivated===false" matTooltip="status" color="warn"
              (click)="providerActiveInActive(row)">circle</mat-icon>


            <button mat-icon-button [matMenuTriggerFor]="varMenu" class="hidden-on-open">
              <mat-icon matTooltip="verification">info</mat-icon>
            </button>
            <mat-menu #varMenu="matMenu">
              <button mat-menu-item>
                <mat-icon>refresh</mat-icon>In review
              </button>
              <button mat-menu-item>
                <mat-icon>unpublished</mat-icon>Unverified
              </button> <button mat-menu-item>
                <mat-icon>verified_user</mat-icon>Verified
              </button> <button mat-menu-item>
                <mat-icon>done_all</mat-icon>Publised
              </button>
            </mat-menu>


          </td>
          <td>
            <!-- <span *ngIf="row?.isPublished" (click)="publishUnpublishProgram(row,i,false)">Click To UnPublish</span>
            <span *ngIf="!row?.isPublished" (click)="publishUnpublishProgram(row,i,true)">Click To Publish</span> -->
            <mat-slide-toggle [checked]="row?.isFreeTrial" color="primary"
            (change)="setOrUnsetFreeTrial($event,i)">
        </mat-slide-toggle>

        </td>
          <!-- Actions  -->

          <td>
            <button mat-icon-button [matMenuTriggerFor]="msgMenu" class="hidden-on-open">
              <mat-icon class="text-muted">more_vert</mat-icon>
            </button>
            <mat-menu #msgMenu="matMenu">

              <button *ngIf="row.id" mat-menu-item (click)="edit(row)">
                <mat-icon>edit</mat-icon>Edit
              </button>
              <button *ngIf="row._id" mat-menu-item (click)="edit(row)">
                <mat-icon>edit</mat-icon>Edit
              </button>
              <button *ngIf="row.id" mat-menu-item (click)="deleteProvider(row)">
                <mat-icon>delete</mat-icon>Delete
              </button>
              <button *ngIf="row._id" mat-menu-item (click)="deleteProvider(row)">
                <mat-icon>delete</mat-icon>Delete
              </button>

              <button mat-menu-item>
                <mat-icon>dynamic_feed</mat-icon>Logout
              </button>

              <button *ngIf="row.id" mat-menu-item (click)="providerProfile(row)">
                <mat-icon>open_in_new</mat-icon>Manage
              </button>
              <button *ngIf="row._id" mat-menu-item (click)="providerProfile(row)">
                <mat-icon>open_in_new</mat-icon>Manage
              </button>

            </mat-menu>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>